<!DOCTYPE html >
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en">
  <title>16May2014 Fri</title>
  <link rel="stylesheet" href="res/agenda.css" type="text/css">
  <script type="text/javascript" src="res/jquery/jquery.js">
 </script>
  <script type="text/javascript" src="res/agenda.js">
 </script>
  <script type="text/javascript" src="./res/tocBuilder.js">
 </script>
  <link href="./res/jquery/tocBuilder.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">
      $(document).ready(function () {
      });
  </script>
</head>

<body>

<div id="agendaHeader">

<div class="fixedHeader">
<a href="agenda20140515.html" accesskey="-"><img alt="prev"
src="res/left.gif"></a><a href="agenda20140517.html" accesskey="+"><img
alt="next" src="res/right.gif"></a> 

<h1 style="display: inline; ">agenda 16May2014 Fri </h1>
</div>

<div id="agendaLinks">

<div id="tocContainer" class="tocContainer">

<div class="toc">
</div>
</div>

<p> </p>

<p><a href="agenda20140314.html">jQuery plugins</a>  </p>
<hr>
</div>
</div>

<div id="agendaBody">
<h3>ACTALEJUR testing</h3>

<p></p>
<pre>cob64 lstpath"/d/iccol/desarrollo/temporales" -uv -g -P -C sourceasm $FUENTES/CARGAJUR.CBL

sdiff -w 170 JURADCAR.CBL CARGAJUR.CBL

[^ a-zA-Z0-9*$="}{\][|#%/?&gt;&lt;,.;:\-_áéíóúñÑ+&amp;)(] </pre>

<h4>Código en mayúsculas</h4>

<p>Se convierte el texto que está fuera de los literales (antes, entre, o
después) a mayúsculas. </p>

<p>Se seleccionan las líneas de código que no son comentarios, es decir, que
tienen la col 7 en blanco. </p>
<pre>texto antes del primer literal:
^[^"]*"

texto a continuación del último literal:
"[^"]*$

texto entre literales (no anda en vi): 
^[^"]*"[^"]*"\zs\([^"]*\)"

primer texto entre literales:
:%s/^\([^"]*"[^"]*"\)\([^"]*\)/\1\U\2

tres comandos de la forma:
:g/^...... /s/&lt;selección&gt;/\U$/g

el comando: 
:g/^...... /s/^[^"]*"/\U$/g
:g/^...... /s/"[^"]*$/\U$/g
:g/^...... /s/^[^"]*"[^"]*"\zs\([^"]*\)"/\U$/g</pre>

<h4>El contenido del archivo no coincide</h4>

<p>La definición pide fechas YYMMDD, en el archivo de prueba hay fechas
YYYYMMDD. Cambiando el programa para adaptarlo al formato del archivo, previo
commit.</p>

<h4>Problema con el encoding</h4>

<p>En los registros que contienen "Ñ" se producen problemas con los DBCS.
Cambiadas las "Ñ" por "n" para continuar la prueba. Se necesita una definición
sobre cuál encoding usar, y adaptar el programa. </p>

<p>La máaquina de Experian opera con ISO-8859-1. Los problemas se resuelven
configurando la terminal (PuTTY). </p>

<p></p>

<h4>Pendiente</h4>
<ol>
  <li class="doneItem">Emitir el reporte de totales de registros.</li>
  <li class="doneItem">Emitir el reporte de totales por tipo de error. </li>
  <li class="doneItem">Modificar el formato del registro de totales para los
    campos ampliados.</li>
  <li class="doneItem">Ajustar el encoding del archivo. </li>
  <li class="doneItem">Grabación del archivo de errores. </li>
  <li class="doneItem">Implementar el parámetro real / en falso. </li>
  <li class="doneItem">Mostrar el tipo de corrida: real o en falso. </li>
  <li><img alt="!" src="res/caramba_yellow.gif" width="7" height="14"> Comparar
    los contadores del programa con los del registro "T". </li>
  <li>Hacer un comando de shell para ejecutar este programa.</li>
  <li>Los archivos van en $TEMPORALES</li>
  <li>Escribir la documentación técnica. </li>
  <li>Falta CLOSE de todos los archivos. </li>
  <li>Resolver el armado de las líneas de alerta. </li>
</ol>

<p></p>

<h4>Tasks</h4>
<ol>
  <li class="doneItem">Las fechas del arch ERRS son de 6 dígitos</li>
  <li class="doneItem">El registro de ERRS está truncado, debe ser de 186
    caracteres</li>
  <li class="doneItem">No salen los códigos de error en ERRS</li>
  <li class="doneItem">Probar proceso REAL</li>
  <li>Controlar los registros grabados enel proceso real</li>
  <li>Agregar cálculo del porcentaje de errores</li>
  <li>La carga inicial no eliminó las alertas grabadas por el test anterior</li>
</ol>

<p></p>
<pre class="small70">. viset
vi CARGAJUR.CBL
des-c-v CARGAJUR
cat CARGAJUR.CBL.err
vi 9999991000905140101.txt
locale
x CARGAJUR 9999991000905140101.txt NO

/d/iccol/desarrollo/temporales/9999991000905140101_ERRORES.txt
/d/iccol/desarrollo/temporales/9999991000905140101.txt



/d/iccol/desarrollo $cat 9999991000905140101.txt
                                                          ...+++_--_____...+++_--_____
I100000149123JOSE MISAEL AREVALO SANCHEZ                  0010012013040500905720130411
I100000262135LIBARDO ANTONIO GARZON TORRE                 0150202013020602204520120406
I100000958212LUIS GUILLERMO AVENDAÃ&lsquo;O RODR                 0020442013050603302020000406
I100001327130GONZALO PATIÃ&lsquo;O MORENO                        0030062013010604407619984069
I100002249789JOAQUIN VARGAS CABALLERO                     0040032012040601104320440406
I100002859753ERNESTO RICO                                 0050672013040602206720100435
I100002865767MIGUEL ANTONIO LAVERDE NIETO                 0060452011040603303320111406
I100003044362MANUEL CASTRO MUÃ&lsquo;ETON                        0070rt2011010605300120130406
I100003295380HENRY REY BARBOSA                            0080452013011123200220110506
I100003448867JAIRO DE JESUS HENAO VILLEGA                 0090572013041104550030100806
I200800002194SERVICULTIVOS LTDA                           0220452012040603404520120406
I200800178009CALZADO ORION DEL LITORAL                    0330202000040601505420140106
I200811046741SALUD AXIAL LTDA                             0440761998406903400219990101
I200830067928C I GLOMA S A                                0110432044040601203220100406
I200860013816INSTITUTO DE SEGUROS SOCIALE                 0220672010043503300220131206
I200860024151COMPUTEC SA                                  0330332011140604500120110402
I200860034313BANCO DAVIVIENDA SA                          0533000013040601102320110411
I200890300546COLGATE PALMOLIVE COMPAIA                    2322000011050603304320131010
I200890934264SUBSUELO Y GEOTECNIA LTDA                    0450002010080600204420130506
I200890107487SUPERTIENDAS Y DROGUERIAS OL                 0340452012040600300620130106
I300600003115xxxxxx                                       0150542014010600400320120406
I300611000446ANTONIO CONDOLUCI DOMINGO                    0340021999010100506720130406
I400000163597MARWA MIKHAEL SKAFF DE KARAA                 0120322010040600604520110406
I400000266423SIMONE MARTINEZ                              033002201312060070rt20110106
I400000244359PATRICIO ALEJANDRO HERRERA C                 0450012011040200804520130111
I400000136711ARIAS NILO RIESCO                            0110232011041100905720130411
I400000163598xxxxxx                                       0330432013101002204520120406
T 00000000027                                             772774        787861


/d/iccol/desarrollo $99991000905140101_ERRORES.txt
I100000149123JOSE MISAEL AREVALO SANCHEZ                  0010012013040500905720130411 14
I100000262135LIBARDO ANTONIO GARZON TORRE                 0150202013020602204520120406 14
I100000958212LUIS GUILLERMO AVENDAnO RODR                 0020442013050603302020000406 14
I100001327130GONZALO PATInO MORENO                        0030062013010604407619984069 13
I100002859753ERNESTO RICO                                 0050672013040602206720100435 13
I100002865767MIGUEL ANTONIO LAVERDE NIETO                 0060452011040603303320111406 13
I100003044362MANUEL CASTRO MUnETON                        0070rt2011010605300120130406 07
I100003448867JAIRO DE JESUS HENAO VILLEGA                 0090572013041104550030100806 13
I200811046741SALUD AXIAL LTDA                             0440761998406903400219990101 09
I200860013816INSTITUTO DE SEGUROS SOCIALE                 0220672010043503300220131206 09
I200860024151COMPUTEC SA                                  0330332011140604500120110402 09
I200860034313BANCO DAVIVIENDA SA                          0533000013040601102320110411 09
I200890300546COLGATE PALMOLIVE COMPAIA                    2322000011050603304320131010 09
I300600003115xxxxxx                                       0150542014010600400320120406 15
I400000266423SIMONE MARTINEZ                              033002201312060070rt20110106 11
I400000244359PATRICIO ALEJANDRO HERRERA C                 0450012011040200804520130111 14
I400000163598xxxxxx                                       0330432013101002204520120406 15



/d/iccol/desarrollo $x CARGAJUR 9999991000905140101.txt SI
Parametros: 9999991000905140101.txt SI
CARGAJUR   Carga de archivo JURAD - proceso REAL
01 Envio Original - Carga TOTAL 1a vez
Fecha de proceso: 20140101

I100000149123JOSE MISAEL AREVALO SANCHEZ                  0010012013040500905720130411
Error 14 El numero de id no se encuentra en el archivo maestro
Errores del reg:  14                                                                                      

I100000262135LIBARDO ANTONIO GARZON TORRE                 0150202013020602204520120406
Error 14 El numero de id no se encuentra en el archivo maestro
Errores del reg:  14                                                                                      

I100000958212LUIS GUILLERMO AVENDAnO RODR                 0020442013050603302020000406
Error 14 El numero de id no se encuentra en el archivo maestro
Errores del reg:  14                                                                                      

I100001327130GONZALO PATInO MORENO                        0030062013010604407619984069
Error 13 Fecha ultimo embargo vigente YYYYMMDD: fuera de rango
Errores del reg:  13                                                                                      

I100002859753ERNESTO RICO                                 0050672013040602206720100435
Error 13 Fecha ultimo embargo vigente YYYYMMDD: fuera de rango
Errores del reg:  13                                                                                      

I100002865767MIGUEL ANTONIO LAVERDE NIETO                 0060452011040603303320111406
Error 13 Fecha ultimo embargo vigente YYYYMMDD: fuera de rango
Errores del reg:  13                                                                                      

I100003044362MANUEL CASTRO MUnETON                        0070rt2011010605300120130406
Error 07 Numero de demandas terminadas: debe ser numerico
Errores del reg:  07                                                                                      

I100003448867JAIRO DE JESUS HENAO VILLEGA                 0090572013041104550030100806
Error 13 Fecha ultimo embargo vigente YYYYMMDD: fuera de rango
Errores del reg:  13                                                                                      

I200811046741SALUD AXIAL LTDA                             0440761998406903400219990101
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango
Errores del reg:  09                                                                                      

I200860013816INSTITUTO DE SEGUROS SOCIALE                 0220672010043503300220131206
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango
Errores del reg:  09                                                                                      

I200860024151COMPUTEC SA                                  0330332011140604500120110402
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango
Errores del reg:  09                                                                                      

I200860034313BANCO DAVIVIENDA SA                          0533000013040601102320110411
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango
Errores del reg:  09                                                                                      

I200890300546COLGATE PALMOLIVE COMPAIA                    2322000011050603304320131010
Error 09 Fecha ultima demanda vigente YYYYMMDD: fuera de rango
Errores del reg:  09                                                                                      

I300600003115xxxxxx                                       0150542014010600400320120406
Error 15 El nombre en el input no coincide con el registrado
novedad:  xxxxxx
registro: FERNANDEZ PENA JULIO ANTONIO
Errores del reg:  15                                                                                      

I400000266423SIMONE MARTINEZ                              033002201312060070rt20110106
Error 11 Numero de embargos terminados: debe ser numerico
Errores del reg:  11                                                                                      

I400000244359PATRICIO ALEJANDRO HERRERA C                 0450012011040200804520130111
Error 14 El numero de id no se encuentra en el archivo maestro
Errores del reg:  14                                                                                      

I400000163598xxxxxx                                       0330432013101002204520120406
Error 15 El nombre en el input no coincide con el registrado
novedad:  xxxxxx
registro: KARAN  ABBOUD NAJAH
Errores del reg:  15                                                                                      

Totales de registros:
      27 Registros IME en el archivo de entrada
      10 Registros procesados sin error
      17 Registros con error
         Alertas borradas previo al refresque total
      20 Alertas insertadas                                 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
         Alertas modificadas
         Alertas eliminadas
         Insercion de alerta existente
         Modif o elim de alerta inexistente

Totales por tipo de error detectado:
       1 07-Numero de demandas terminadas: debe ser numerico
       5 09-Fecha ultima demanda vigente YYYYMMDD: fuera de rango
       1 11-Numero de embargos terminados: debe ser numerico
       4 13-Fecha ultimo embargo vigente YYYYMMDD: fuera de rango
       4 14-El numero de id no se encuentra en el archivo maestro
       2 15-El nombre en el input no coincide con el registrado

real    0m0.03s
user    0m0.01s
sys     0m0.01s

Inicio de Programa:  2014/05/16 13:57:56
Fin de Programa:     2014/05/16 13:57:56

/d/iccol/desarrollo $

La vez siguiente detecta las alertas existentes:

Totales de registros:
      27 Registros IME en el archivo de entrada
      10 Registros procesados sin error
      17 Registros con error
         Alertas borradas previo al refresque total
         Alertas insertadas
      20 Alertas modificadas                                &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
         Alertas eliminadas
      20 Insercion de alerta existente
         Modif o elim de alerta inexistente

Totales por tipo de error detectado:
       1 07-Numero de demandas terminadas: debe ser numerico
       5 09-Fecha ultima demanda vigente YYYYMMDD: fuera de rango
       1 11-Numero de embargos terminados: debe ser numerico
       4 13-Fecha ultimo embargo vigente YYYYMMDD: fuera de rango
       4 14-El numero de id no se encuentra en el archivo maestro
       2 15-El nombre en el input no coincide con el registrado

real    0m0.03s
user    0m0.01s
sys     0m0.01s

Inicio de Programa:  2014/05/16 13:59:43
Fin de Programa:     2014/05/16 13:59:43

/d/iccol/desarrollo $
</pre>

<p></p>

<p></p>

<h3>Week hours</h3>

<p></p>

<table border="1">
  <col>
  <col>
  <col>
  <col>
  <col>
  <tbody>
    <tr>
      <th>day</th>
      <th>date</th>
      <th>hrs</th>
      <th>did</th>
      <th>planned</th>
    </tr>
    <tr>
      <th>sat</th>
      <td>10</td>
      <td>6</td>
      <td>Programando ACTALEJUR</td>
      <td></td>
    </tr>
    <tr>
      <th>sun</th>
      <td>11</td>
      <td>8</td>
      <td>Programando ACTALEJUR</td>
      <td></td>
    </tr>
    <tr>
      <th>mon</th>
      <td>12</td>
      <td></td>
      <td><ul>
          <li>Escribiendo definiciones y consultas para ACTALEJUR</li>
          <li>Programando ACTALEJUR</li>
        </ul>
      </td>
      <td>Prog =, terminar</td>
    </tr>
    <tr>
      <th>tue</th>
      <td>13</td>
      <td></td>
      <td><ul>
          <li>Juntando definiciones para ACTALEJUR</li>
          <li>Reunión de aclaración de dudas</li>
          <li>Incorporación de consultas respondidas en la documentación</li>
        </ul>
      </td>
      <td>Test =</td>
    </tr>
    <tr>
      <th>wed</th>
      <td>14</td>
      <td></td>
      <td><ul>
          <li>Incorporación de consultas respondidas en la documentación</li>
          <li>Redactando nuevas consultas para ACTALEJUR</li>
          <li>Completando ACTALEJUR</li>
          <li>Estudiando programa PESVNO</li>
        </ul>
      </td>
      <td></td>
    </tr>
    <tr>
      <th>thu</th>
      <td>15</td>
      <td></td>
      <td><ul>
          <li>Redactando nuevas consultas para ACTALEJUR</li>
          <li>Completando ACTALEJUR</li>
        </ul>
      </td>
      <td></td>
    </tr>
    <tr>
      <th>fri</th>
      <td>16</td>
      <td>9 

        <p></p>
      </td>
      <td><ul>
          <li>Programando y probando ACTALEJUR (CARGAJUR)</li>
        </ul>
      </td>
      <td></td>
    </tr>
  </tbody>
</table>

<p> </p>

<h3>Subprograma para procesar totales de control</h3>

<p></p>

<p> </p>
<pre class="small70">      ******************************************************************
      ******************************************************************

ABANDONADO: 
      /
       IDENTIFICATION DIVISION.
       PROGRAM-ID. CHECKTOTAL.
      ******************************************************************
      * Rutina de conveniencia para controlar la coincidencia de los
      * totales de control y denunciar las diferencias
      * Recibe la descripcion del par de totales a controlar, el total
      * informado, y el total calculado.
      * Compara los dos valores, y si no coinciden muestra un mensaje
      * y retorna una senial. 
      ******************************************************************
       ENVIRONMENT DIVISION.
       DATA DIVISION.
       WORKING-STORAGE SECTION.
      ******************************************************************
      * Edicion de los totales
       01  T-infoX                      pic x(12).
       01  T-info                       redefines T-infoX
                                        pic 9(12).
       01  T-calcX                      pic x(12).
       01  T-calc                       redefines T-calcX
                                        pic 9(12).
      * Edicion del texto
       01  T-nombre                     pic x(100).
       01  T-mensaje                    pic x(100).
      ******************************************************************

       LINKAGE SECTION.
      ******************************************************************
      * Nombre del total
       01 TOTAL-nombre                  pic x(100).
       01 TOTAL-nombre-L                pic S9(9) comp-5.
      ******************************************************************
      * Totales informado y calculado
       01 TOTAL-informado               pic x(12).
       01 TOTAL-informado-L             pic S9(9) comp-5.
       01 TOTAL-calculado               pic 9(8).
      ******************************************************************
      * call CHECKTOTAL using "Cant de registros" JURADT-registros
      * length of JURADT-registros N-registros-leidos
      ******************************************************************

       PROCEDURE DIVISION using 
           delimited TOTAL-nombre 
           TOTAL-informado by value TOTAL-informado-L
           TOTAL-calculado.
       00.
      *    long del texto
           inspect TOTAL-nombre-L
      *    total informado
           if TOTAL-informado-L &gt; 12 stop run.
           move zeros to T-info
           move TOTAL-informado(1:TOTAL-informado-L) 
           to T-infox(12 - TOTAL-informado-L:TOTAL-informado-L)
           if T-info not numeric
               string T-nombre delimited by low-value " no numerico"
               delimited size into T-mensaje
               display T-mensaje
           end-if
      *    total calculado - no se controla
           move zeros to T-calc
           move TOTAL-calculado(1:TOTAL-calculado-L) 
           to T-calcx(12 - TOTAL-calculado-L:TOTAL-calculado-L)
      *    control
           if T-calc = T-info 
               goback returning 0
           else
               display T-nombre
               display "Calculado:" T-calc "   Informado:" T-info
               goback returning 1
           end-if.


           
      *    descripcion (nombre del total)
           if TOTAL-nombre-L &gt; 100 
               move 100 to TOTAL-nombre-L
           end-if
           move TOTAL-nombre(1:TOTAL-nombre-L) to T-nombre
           inspect T-nombre replacing trailing spaces by low-values
           inspect T-nombre replacing first low-value by space



           exit program.


       end program CHECKTOTAL.</pre>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>
</div>
</body>
</html>
