<!DOCTYPE html >
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en">
  <title>10Jul2014 Thu</title>
  <link rel="stylesheet" href="res/agenda.css" type="text/css">
  <script type="text/javascript" src="res/jquery-2.0.3.js"></script>
  <script type="text/javascript" src="res/agenda.js"></script>
  <script type="text/javascript" src="./res/tocBuilder.js"></script>
  <link href="./res/jquery/tocBuilder.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">
      $(document).ready(function () {
      });
  </script>
</head>

<body>

<div id="agendaHeader">

  <div class="fixedHeader">
    <a href="agenda20140709.html" accesskey="-"><img alt="prev"
      src="res/left.gif"></a><a href="agenda20140711.html" accesskey="+"><img
      alt="next" src="res/right.gif"></a> 
    <h1 style="display: inline; ">agenda 10Jul2014 Thu </h1>
  </div>

  <div id="agendaLinks">
    <div id="tocContainer" class="tocContainer">
      <div class="toc">
      </div>
    </div>
    <p> </p>
    <p><a
      href="https://github.com/grantm/jquery-udraggable/blob/master/jquery.udraggable.js">grantm/jquery-udraggable</a>
     </p>
    <hr>
  </div>
</div>

<div id="agendaBody">

<h3>Publishing the jQuery plugin tuto</h3>
<ol>
  <li>The TOC doesn't show, it might be because zepto instead of jQuery. </li>
  <li>The code page is missing</li>
  <li>The abacus doesn't show: need to publish the js and the css somewhere
    (GitHub?)</li>
  <li>The readme in GitHub is the jQuery.jumpstart's one </li>
  <li>Set Anchor to be run locally, so tests happen faster and from
  anywhere</li>
  <li>The local page has all the links moved into the &lt;body&gt;: test with
    other browsers </li>
  <li>Implement the newer own TOC builder </li>
</ol>


<p></p>
<p></p>

<hr>
  <h3>Simple <a href="http://jsfiddle.net/jlanus/8tJav/23/">splitter</a></h3>

  <div id="splitterContainer">
    <pre id="ss_debug">
    </pre>
<style>
  .ss_simpleSplitter { width:100%; height:222px; }
  .ss_left { float:left; width:44%; height:100%; }
  .ss_divider { float:left; width:13px; background:rgb(222,222,222); font-size:60%;
    height:100%; cursor:ew-resize;  }
  .ss_right { float:left; width:44%; height:100%; }
  .draggable { background:yellow; }
</style>

<script>
  (function($) {
    $.fn.drags = function(opt) {
    opt = $.extend({handle:"",cursor:"move"}, opt);
    if(opt.handle === "") {
      var $el = this;
    } else {
      var $el = this.find(opt.handle);
    }
    return $el.css('cursor', opt.cursor).on("mousedown", function(e) {
      if(opt.handle === "") {
        var $drag = $(this).addClass('draggable');
      } else {
        var $drag = $(this).addClass('active-handle').parent().addClass('draggable');
      }
      var
        z_idx = $drag.css('z-index'),
        drg_h = $drag.outerHeight(),
        drg_w = $drag.outerWidth(),
        pos_y = $drag.offset().top + drg_h - e.pageY,
        pos_x = $drag.offset().left + drg_w - e.pageX;
      $drag.css('z-index', 1000).parents().on(
        "mousemove",
        function(e) {
          $('#ss_debug').empty().text( 'x:' + (e.pageX + pos_x - drg_w) + '  y:' + (e.pageY + pos_y - drg_h) );
          $('.draggable').offset({
            // top:e.pageY + pos_y - drg_h, to cancel vertical drag
            left:e.pageX + pos_x - drg_w
          }).on(
            "mouseup",
            function() {
              $(this).removeClass('draggable').css('z-index', z_idx);
            });
        }
      );
      e.preventDefault(); // disable selection
    }).on("mouseup", function() {
      if(opt.handle === "") {
        $(this).removeClass('draggable');
      } else {
        $(this).removeClass('active-handle').parent().removeClass('draggable');
      }
    });
  };
})(jQuery);


$(function() {
    // make the divider draggable
    $('.ss_divider').drags();
});
</script>

    <div id="theSplitter" class="ss_simpleSplitter">
      <div class="ss_left">left</div>
      <div class="ss_divider">&lt;&gt;</div>
      <div class="ss_right">right</div>
    </div>

    <div id="links">
      <ul>
        <li>http://www.html5rocks.com/en/tutorials/dnd/basics/</li>
        <li>http://www.html5rocks.com/en/tutorials/dnd/basics/</li>
        <li>https://developer.mozilla.org/en-US/docs/Web/Events</li>
        <li>https://developer.mozilla.org/en-US/docs/Web/Events/dragstart</li>
        <li>http://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/</li>
      </ul>

      <p>Note that the original code above works great, EXCEPT that each drag you
      make slows the browser more and more. To fix this add an .off('event') right
      before each .on call. </p>
    </div>
  </div>

  <p> </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <p> </p>
</div>
</body>
</html>
