<!DOCTYPE html >
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en">
  <title>27Jul2014 Sun</title>
  <style>
  pre, code { font-size:80%; background-color:rgb(248,248,248), }</style>
  <link rel="stylesheet" href="res/agenda.css" type="text/css">
  <script type="text/javascript" src="res/jquery/jquery.js">
 </script>
  <script type="text/javascript" src="res/agenda.js">
 </script>
  <script type="text/javascript" src="./res/tocBuilder.js">
 </script>
  <link href="./res/jquery/tocBuilder.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">
      $(document).ready(function () {
      });
  </script>
</head>

<body>

<div id="agendaHeader">

<div class="fixedHeader">
<a href="agenda20140726.html" accesskey="-"><img alt="prev"
src="res/left.gif"></a><a href="agenda20140728.html" accesskey="+"><img
alt="next" src="res/right.gif"></a> 

<h1 style="display: inline; ">agenda 27Jul2014 Sun </h1>
</div>

<div id="agendaLinks">

<div id="tocContainer" class="tocContainer">

<div class="toc">
</div>
</div>

<p> </p>

<p><a
href="http://www.lanacion.com.ar/1713383-quienes-son-los-booktubers-la-nueva-tendencia-teen-que-dinamiza-al-mercado">¿Quiénes
son los booktubers? La nueva tendencia teen que dinamiza al mercado</a>  </p>

<p>Anchor <a href="agenda20140714.html">TODO #1</a> <a
href="agenda20140717.html">TODO #2</a> <a href="agenda20140719.html">TODO
#3</a> <a href="agenda20140720.html">TODO #4</a> <a
href="agenda20140722.html">TODO #5</a> <a href="agenda20140724.html">DONE
FIX</a> </p>
<hr>
</div>
</div>

<div id="agendaBody">
<h3>Anchor modified files</h3>

<p>This is the outcome of synchronizing the downloaded online Anchor version
with the local one. </p>

<p>All local files are set like their online counterparts, except for one that
had an error and has to be uploaded modified. </p>

<p>The local version has still to be compared against a fresh Anchor install in
order to detect and check all the changes previously introduced online. </p>
<ul>
  <li><code>/home/jlanus/blog/a/anchor/libraries/update.php</code><br>
    Local version has the version number hardcoded </li>
  <li><code>/home/jlanus/blog/a/anchor/routes/admin.php</code><br>
    Local version has all the comments touched</li>
  <li><code>/home/jlanus/blog/a/anchor/routes/posts.php</code><br>
    All comments touched</li>
  <li><code>/home/jlanus/blog/a/anchor/views/assets/css/admin.css</code><br>
    Textarea monospace in online version
    <code>/home/jlanus/blog/a/anchor/views/assets/css/admin.css</code> </li>
  <li>Online textarea monospace: <code>textarea { font: 10px/15px "Anonymous
    Pro", Consolas, monospace; padding: 0 2px; } !important</code><br>
    and <code>textarea { font-size: 13px; line-height: 17px; }</code> </li>
  <li><code>/home/jlanus/blog/a/anchor/views/assets/js/sortable.js</code><br>
    Online Zepto replaced by jQuery (not tested) </li>
  <li><code>/home/jlanus/blog/a/anchor/views/partials/editor.php</code><br>
    Online comment added </li>
  <li><code>/home/jlanus/blog/a/anchor/views/partials/header.php</code><br>
    Several changes, more to come </li>
  <li><code>/home/jlanus/blog/a/anchor/views/posts/edit.php</code> <br>
    Online <code>&lt;div class="wrap"&gt;</code> repeated (fixed)
    <p>Both contain the fix, local has <code>| ENT_SUBSTITUTE |
    ENT_HTML5</code> that don't work online: </p>
    <pre>      &lt;?php echo Form::textarea(
        'html',
        htmlspecialchars(
          Input::previous('html', $article-&gt;html),
          ENT_NOQUOTES 
        ),
        array( 
          'placeholder' =&gt; __('posts.content_explain')
        ));
      ?&gt;</pre>
  </li>
  <li><code>/home/jlanus/blog/a/anchor/views/users/add.php</code> 
    <p>Online: comment added </p>
  </li>
  <li><code>/home/jlanus/blog/a/anchor/views/users/edit.php</code><br>
    Online: comment edded </li>
  <li><code>/home/jlanus/blog/a/anchor/views/posts/edit.php</code><br>
    Online has: 
    <pre>// JML 20140715 was: ... = true
function parse($str, $markdown = false) {
  /* JML 20140717 commented out the tags matching section: 
  // process tags
  $pattern = '/[\{\{]{1}([a-z]+)[\}\}]{1}/i';

  if(preg_match_all($pattern, $str, $matches)) {
    list($search, $replace) = $matches;

    foreach($replace as $index =&gt; $key) {
      $replace[$index] = Config::meta($key);
    }

    $str = str_replace($search, $replace, $str);
  } */


  //  Parse Markdown as well?
  if($markdown === true) {
    // Convert all HTML entities to their applicable characters
    // JML 20140715: don't touch the char entities
    // $str = html_entity_decode($str, ENT_NOQUOTES, System\Config::app('encoding'));

    // make HTML out of the markdown content
    $md = new Markdown;
    // JML 20140715 returns the string verbatim, was:  $str = $md-&gt;transform($str);
  }</pre>
    <p>Local has: </p>
    <pre>function parse($str, $markdown = true) {
// process tags
$pattern = '/[\{\{]{1}([a-z]+)[\}\}]{1}/i';

if(preg_match_all($pattern, $str, $matches)) {
list($search, $replace) = $matches;

foreach($replace as $index =&gt; $key) {
$replace[$index] = Config::meta($key);
}

$str = str_replace($search, $replace, $str);
}

<strong>$str = html_entity_decode($str, ENT_NOQUOTES, System\Config::app('encoding'));</strong> // NOT IN ONLINE

//  Parse Markdown as well?
if($markdown === true) {
$md = new Markdown;
$str = $md-&gt;transform($str);
}</pre>
  </li>
  <li><code>/home/jlanus/blog/a/system/boot.php</code> 
    <p>Local is touched: </p>
    <pre>/**
 * Error handling
 */
set_exception_handler(array('System\\Error', 'exception'));
set_error_handler(array('System\\Error', 'native'));
// Uncaught Exception
// register_shutdown_function(): Invalid shutdown callback 'System\Error::shutdown' passed
// register_shutdown_function(array('System\\Error', 'shutdown'));</pre>
    <p>in lieu of:</p>
    <pre>register_shutdown_function(array('System\\Error', 'shutdown'));</pre>
  </li>
  <li><code>/home/jlanus/blog//a/system/error.php</code><br>
    Local has an unclosed comment, fixed: 
    <pre>  /**
   * Shutdown handler
   *
   * This will catch errors that are generated at the
   * shutdown level of execution
   * /http://localhost/a/admin/posts/edit     &lt;== HERE
  public static function shutdown() {
    if($error = error_get_last()) {
      extract($error);

      static::exception(new ErrorException($message, $type, 0, $file, $line));
    }
  }</pre>
  </li>
  <li><code>/home/jlanus/blog/a/system/input.php</code><br>
    Local has a typo, fixed, was: 
    <pre>        $query = parse_url(Arr::get($_SERVER, 'RE&lt;QUEST_URI'), PHP_URL_QUERY);</pre>
  </li>
  <li><code>/home/jlanus/blog/a/system/response.php</code><br>
    Local has braces in if: 
    <pre>    if ($this-&gt;output) {
            echo $this-&gt;output;
    }</pre>
  </li>
  <li><code>/home/jlanus/blog/a/themes/default/header.php</code><br>
    Online has Zepto replaced by jQuery, online has Zepto original: 
    <pre>    &lt;!-- &lt;script src="&lt;?php echo asset('anchor/views/assets/js/zepto.js'); ?&gt;"&gt;&lt;/script&gt; --&gt;
    &lt;script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"&gt;&lt;/script&gt;</pre>
    <p>Changed online to have both, for a test: </p>
    <pre>    &lt;script src="&lt;?php echo asset_url('/js/zepto.js'); ?&gt;"&gt;&lt;/script&gt;
    &lt;script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"&gt;&lt;/script&gt;</pre>
  </li>
  <li><code>/home/jlanus/blog/a/themes/jl/</code>
    <p>Missing in local, copied. </p>
  </li>
  <li><code>/home/jlanus/blog/a/.htaccess</code><br>
    Online: 
    <pre>&lt;IfModule mod_rewrite.c&gt;
RewriteEngine On
RewriteBase /a

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*)$ index.php<strong>?</strong>/$1 [L]             <strong>&lt;== the "?"</strong>
&lt;/IfModule&gt;

&lt;IfModule !mod_rewrite.c&gt;
ErrorDocument 404 index.php
&lt;/IfModule&gt;</pre>
    <p>Local: </p>
    <pre>    Options -indexes

    <strong>AddHandler application/x-httpd-php5 .php
    AddType application/x-httpd-php5 .php
    SetEnv PHP_VER 5_5</strong>

    &lt;IfModule mod_rewrite.c&gt;
        RewriteEngine On
        RewriteBase /a

        # Allow any files or directories that exist to be displayed directly
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d

        # Rewrite all other URLs to index.php/URL
        RewriteRule ^(.*)$ index.php/$1 [L]
    &lt;/IfModule&gt;

    &lt;IfModule !mod_rewrite.c&gt;
        ErrorDocument 404 index.php
    &lt;/IfModule&gt;</pre>
    <p></p>
  </li>
</ul>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>
</div>
</body>
</html>
